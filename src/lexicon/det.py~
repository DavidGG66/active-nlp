# Determiner lexicon

import src.common.synval as syn
import src.common.semval as sem
import src.common.synsem as ss

import src.lexicon.tools as lt

def DetLex(sg, plu, df, width):

    synVal = syn.SynValue("DetLex", True)
    synVal["agr"] = {
        "sg": sg,
        "plu": plu}

    roles = {
        "RESTR": "x1",
        "SCOPE": "x2",
        "QUANT": "x3",
        "DEF": df,
        "WIDTH": width}

    hooks = {
        "head": "x1",
        "root": "x2",
        "quant": "x3"}

    relspec = sem.Relspec("Quant", roles)
    semVal = sem.SemValue()
    semVal.AddRelspec(relspec, {}, hooks)

    return ss.SynSem(synVal, semVal)


def DetFixedLex(sg, plu, df, width, rel, val):

    ret = DetLex(sg, plu, df, width)
    ret.synVal["quant"] = "fixed"

    roles = {
        "NODE": "x3",
        "VAL": 1}
    
    relspec = sem.Relspec("AbsVal", roles)
    ret.semVal.AddRelspec(relspec, {"x3": "quant"}, {})

    return ret


def DetRelLex(sg, plu, width, val):

    return DetFixedLex(sg, plu, "indef", width, "RelVal", val)


def DetOpenLex(sg, plu, df, width):

    ret = DetLex(sg, plu, df, width)
    ret.synVal["quant"] = "open"

    return ret

detLexicon = {}

fixedDets = [("a", "+", "-", "indef", "narrow", "AbsVal", 1)]

for form, sg, plu, df, width, rel, val in fixedDets:
    synSem = DetFixedLex(sg, plu, df, width, rel, val)
    lt.AddLexItem(form, detLexicon, synSem)
        

relDets = [
    ("all", "any", "+", "narrow", 1),
    ("each", "+", "-", "wide", 1),
    ("every", "+", "-", "narrow", 1)]

for form, sg, plu, width, val in relDets:
    synSem = DetRelLex(sg, plu, width, val)
    lt.AddLexItem(form, detLexicon, synSem)

        
openDets = [
    ("some", "any", "any", "indef", "narrow"),
    ("that", "+", "any", "distal", "narrow"),
    ("the", "any", "any", "definite", "narrow"),
    ("those", "-", "+", "distal", "narrow")]

for form, sg, plu, df, width in openDets:
    synSem = DetOpenLex(sg, plu, df, width)
    lt.AddLexItem(form, detLexicon, synSem)
